{% extends "base.html" %}

{% block title %}
<title>STIX Parser</title>
{% endblock %}

{% block datatableslib %}{% endblock %}
{% block visjslib %}{% endblock %}
{% block jquery %}
<!--<link rel="stylesheet" type="text/css" href="/static/stixviz/app.css" /> -->
<script>
$(document).ready(
    function(){
        $("input#select_types").click(function(){
            if($(this).prop("checked")){
                $('ul#id_types :checkbox').prop('checked',true);
            }else{
                $('ul#id_types :checkbox').prop('checked',false);
            };
        });
        $("input#select_relation").click(function(){
            if($(this).prop("checked")){
                $('ul#id_relation :checkbox').prop('checked',true);
            }else{
                $('ul#id_relation :checkbox').prop('checked',false);
            };
        });
    }
);
</script>
{% endblock%}

{% block container %}

{% block modal %}{% endblock %}
{% block modal_edit %}{% endblock %}

{% block stixviz %}
<div id="stix_parser" class="col-md-12">

<div id="canvas-container" class="hidden">

<div class="panel panel-default">
<div class="panel-heading">
<h1 id="header">Visualize</h1>
</div>
<div class="panel-body">
<div id="canvas-wrapper"><svg id="canvas"></svg></div>
<div id="legend" class="sidebar">
<h2>Legend</h2>
<ul id="legend-content"></ul>
</div>
<div id="selected" class="sidebar">
<h2>Selected Node</h2>
<div id="selection"></div>
</div>

</div><!--/#canvas-container-->

</div>
</div>
</div><!--/#stixviz-->
{% endblock %}

{% block table %}
<div id="tables" class="col-md-12">
<div class="panel panel-default">
<div class="panel-heading">
STIX Parser
</div>
<div class="panel-body">
<form method="post">{% csrf_token %}
<!--<button type="button" id="viz" onclick=toggleViz("id_input") >Visualize</button>-->
<div class="col-md-12">

<div class="col-md-7">
Parse:
<input type="submit" name="parse_url" value="URLs">
<input type="submit" name="parse_stix2" value="STIX2">
<br>
{{form}}
</div>

<div class="col-md-5">
Filter:
<div class="col-md-12">

<div class="col-md-6" id="types_form">
<input type="checkbox" id="select_types" checked>types</input>
{{tform.types}}
</div>

<div class="col-md-6" id="rel_form">
<input type="checkbox" id="select_relation" checked>relationship</input>
{{tform.relation}}
</div>

</div>
</div>

</div>

<!--<input type="submit" name="import" value="Import">-->
</form>
</div><!--/.panel-body-->
</div><!--/.panel-->
</div><!--/tables-->
{% endblock %}

{% block stixvizlib%}
<script type="text/javascript" src="/static/d3/d3.min.js"></script>
<script type="text/javascript" src="/static/stixviz/stix2viz.js"></script>
<script type="text/javascript" src="/static/stixviz/app.js"></script>
{% endblock %}


{% endblock %}
